import{a as o,L as e,R as y,A as de,T as U,m as C,E as w,o as I,D as j,V as Z,Y as R,$ as h,a0 as $,I as u,a1 as F,P as ce,a2 as _,a3 as q,G as oe,a4 as W,a5 as he,g as z,J as G,a6 as xe,a7 as je,a8 as ue,a9 as K,l as me,aa as pe,U as S,ab as A,ac as Q,ad as ge,b as fe}from"./index-0d19177e.js";import{d as g}from"./globalStyle-ed485bee-3719433e.js";import{d as ve,a as ke,o as ye,r as be}from"./links-055e87fc-1389477c.js";import{i as v,p as n,D as c,B as we,L as _e}from"./BaseContext-b2603304-d1129fb6.js";import{N as Me,d as ze,O as Ce,b as Ie,c as De,u as Le,L as X,a as Te}from"./DesktopAppView-6f26ab52-fe364a3c.js";import{L as Ne}from"./auth-94100680-dd86dcc7.js";import{n as E}from"./Placeholder-d8632411-711021b4.js";import{h as B,r as Re}from"./IconSearch-a226eee4-73f8e550.js";var Fe=v("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Se=v("backspace","IconBackspace",[["path",{d:"M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z",key:"svg-0"}],["path",{d:"M12 10l4 4m0 -4l-4 4",key:"svg-1"}]]),Ee=v("chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),Be=v("heart","IconHeart",[["path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572",key:"svg-0"}]]),He=v("layout-sidebar","IconLayoutSidebar",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 4l0 16",key:"svg-1"}]]),Pe=v("logout","IconLogout",[["path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M9 12h12l-3 -3",key:"svg-1"}],["path",{d:"M18 15l3 -3",key:"svg-2"}]]),Je=v("qrcode","IconQrcode",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 17l0 .01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7l0 .01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7l0 .01",key:"svg-5"}],["path",{d:"M14 14l3 0",key:"svg-6"}],["path",{d:"M20 14l0 .01",key:"svg-7"}],["path",{d:"M14 14l0 3",key:"svg-8"}],["path",{d:"M14 20l3 0",key:"svg-9"}],["path",{d:"M17 17l3 0",key:"svg-10"}],["path",{d:"M20 17l0 3",key:"svg-11"}]]),ee=v("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Ye=v("user-circle","IconUserCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855",key:"svg-2"}]]);const Ze="/assets/Vision_IMS-19c9a929.svg",se=o.forwardRef((s,r)=>e.jsx("div",{ref:r,...s,children:e.jsx(Me,{to:"/",children:e.jsx(y,{size:28,children:e.jsx("img",{src:Ze,alt:n._({id:"DVAy0b"}),height:28})})})}));function Ke(){const{classes:s}=g(),r=ve.map(i=>e.jsx(I,{color:"dimmed",href:i.link,onClick:t=>t.preventDefault(),size:"sm",children:i.label},i.key));return e.jsx("div",{className:s.layoutFooter,children:e.jsxs(C,{className:s.layoutFooterInner,size:"xl",children:[e.jsx(se,{}),e.jsx(j,{className:s.layoutFooterLinks,children:r})]})})}function Ae(){return e.jsx(y,{onClick:()=>we({modal:"qr",title:n._({id:"XDwkfO"}),innerProps:{}}),children:e.jsx(Je,{})})}function Oe(){const{classes:s,theme:r}=g(),[i]=Le(t=>{var a;return[(a=t.user)==null?void 0:a.name]});return e.jsxs(h,{width:260,position:"bottom-end",children:[e.jsx(h.Target,{children:e.jsx($,{className:s.layoutHeaderUser,children:e.jsxs(j,{spacing:7,children:[e.jsx(u,{weight:500,size:"sm",sx:{lineHeight:1},mr:3,children:i||e.jsx(F,{height:20,width:40,radius:r.defaultRadius})}),e.jsx(Ee,{})]})})}),e.jsxs(h.Dropdown,{children:[e.jsxs(h.Item,{icon:e.jsx(Be,{}),children:[e.jsx(c,{id:"iDNBZe"}),e.jsx(E,{})]}),e.jsxs(h.Item,{icon:e.jsx(Ye,{}),children:[e.jsx(c,{id:"vERlcd"})," ",e.jsx(E,{})]}),e.jsx(h.Label,{children:e.jsx(c,{id:"Tz0i8g"})}),e.jsx(h.Item,{icon:e.jsx(ee,{}),component:X,to:"/profile/user",children:e.jsx(c,{id:"T3FM0r"})}),e.jsx(h.Item,{icon:e.jsx(Pe,{}),onClick:()=>{Ne()},children:e.jsx(c,{id:"nOhz3x"})})]})]})}const re=[{id:"home",text:e.jsx(c,{id:"i0qMbr"}),link:"/",highlight:!0},{id:"profile",text:e.jsx(c,{id:"kNyJAF"}),link:"/profile/user",doctext:e.jsx(c,{id:"CFYxhi"})},{id:"playground",text:e.jsx(c,{id:"0LrFTO"}),link:"/playground",highlight:!0}];function ie({children:s,text:r,detail:i,link:t,docchildren:a}){const{classes:x}=g();return e.jsxs(_,{shadow:"md",openDelay:200,closeDelay:200,withinPortal:!0,classNames:{dropdown:x.docHover},children:[e.jsx(_.Target,{children:e.jsx("div",{children:s})}),e.jsx(_.Dropdown,{children:e.jsx(Ve,{text:r,detail:i,docchildren:a,link:t})})]})}function Ve({text:s,detail:r,docchildren:i,link:t}){const[a,x]=o.useState(0),f=o.useRef(null);return o.useEffect(()=>{if(f.current==null)return;let k=f.current.clientHeight;k>250?x(250):x(k+1)}),e.jsxs(C,{maw:400,p:0,children:[e.jsx(u,{children:s}),(r||i)&&e.jsx(G,{h:a,mah:250,children:e.jsxs("div",{ref:f,children:[r&&e.jsx(u,{size:"xs",color:"dimmed",children:r}),i]})}),t&&e.jsx(I,{href:t,target:"_blank",children:e.jsx(u,{size:"sm",children:e.jsx(c,{id:"IvkbIT"})})})]})}function Ue({item:s,children:r}){return s.doctext!==void 0?e.jsx(ie,{text:s.doctext,detail:s==null?void 0:s.docdetail,link:s==null?void 0:s.doclink,docchildren:s==null?void 0:s.docchildren,children:r},s.id):e.jsx(e.Fragment,{children:r})}function H({links:s,highlighted:r}){const{classes:i}=g();r=r||!1;const t=s.filter(a=>!r||a.highlight===!0);return e.jsx(Q,{cols:2,spacing:0,children:t.map(a=>e.jsx(Ue,{item:a,children:e.jsx($,{className:i.subLink,component:X,to:a.link,p:0,children:e.jsx(u,{size:"sm",fw:500,children:a.text})})},a.id))})}function $e({openDrawer:s}){const{classes:r,theme:i}=g(),[t,a]=ce(b=>[b.hostKey,b.hostList]),[x]=Te(b=>[b.server.instance]),[f,k]=o.useState();return o.useEffect(()=>{t&&a[t]&&k(a[t].name)},[t]),e.jsxs(_,{width:600,position:"bottom",shadow:"md",withinPortal:!0,children:[e.jsx(_.Target,{children:e.jsx(se,{})}),e.jsxs(_.Dropdown,{sx:{overflow:"hidden"},children:[e.jsxs(j,{position:"apart",px:"md",children:[e.jsx(y,{onClick:s,onMouseOver:s,title:n._({id:"rmlxV1"}),children:e.jsx(He,{})}),e.jsxs(j,{spacing:"xs",children:[f||e.jsx(F,{height:20,width:40,radius:i.defaultRadius})," ","|"," ",x||e.jsx(F,{height:20,width:40,radius:i.defaultRadius})]}),e.jsx(I,{href:"#",fz:"xs",onClick:s,children:e.jsx(c,{id:"N6Pxr9"})})]}),e.jsx(q,{my:"sm",mx:"-md",color:i.colorScheme==="dark"?"dark.5":"gray.1"}),e.jsx(H,{links:re,highlighted:!0}),e.jsx("div",{className:r.headerDropdownFooter,children:e.jsxs(j,{position:"apart",children:[e.jsxs("div",{children:[e.jsx(u,{fw:500,fz:"sm",children:e.jsx(c,{id:"ZDIydz"})}),e.jsx(u,{size:"xs",color:"dimmed",children:e.jsx(c,{id:"BQDL+H"})})]}),e.jsx(oe,{variant:"default",children:e.jsx(c,{id:"ZDIydz"})})]})})]})]})}function O({links:s}){return e.jsx(Q,{cols:2,spacing:0,children:s.map(r=>e.jsx(ie,{text:r.description,children:e.jsx(I,{href:r.link,children:r.placeholder?e.jsxs(j,{children:[e.jsx(u,{size:"sm",fw:500,children:r.title}),e.jsx(E,{})]}):e.jsx(u,{size:"sm",fw:500,children:r.title})},r.id)},r.id))})}const V=[];function qe({opened:s,close:r}){const{classes:i}=g();return e.jsx(W,{opened:s,onClose:r,overlayProps:{opacity:.5,blur:4},withCloseButton:!1,classNames:{body:i.navigationDrawer},children:e.jsx(We,{})})}function We(){const{classes:s}=g(),[r,i]=o.useState(0),t=o.useRef(null),{height:a}=he();return o.useEffect(()=>{t.current!=null&&i(a-t.current.clientHeight-65)}),e.jsxs(U,{direction:"column",mih:"100vh",p:16,children:[e.jsx(z,{order:3,children:n._({id:"UxKoFf"})}),e.jsx(C,{className:s.layoutContent,p:0,children:e.jsxs(G,{h:r,type:"always",offsetScrollbars:!0,children:[e.jsx(z,{order:5,children:n._({id:"wRR604"})}),e.jsx(H,{links:re}),e.jsx(w,{h:"md"}),V.length>0?e.jsxs(e.Fragment,{children:[e.jsx(z,{order:5,children:n._({id:"ohUJJM"})}),e.jsx(H,{links:V})]}):e.jsx(e.Fragment,{})]})}),e.jsxs("div",{ref:t,children:[e.jsx(w,{h:"md"}),e.jsx(z,{order:5,children:n._({id:"TvY/XA"})}),e.jsx(O,{links:ye}),e.jsx(w,{h:"md"}),e.jsx(z,{order:5,children:n._({id:"uyJsf6"})}),e.jsx(O,{links:be})]})]})}function m(s){return!0}function p(s){return e.jsxs(u,{size:"sm",children:["Result here - ID = ",`${s.pk}`]})}function Ge(){return[{name:"part",title:n._({id:"pmRbKZ"}),parameters:{},render:p,enabled:m()},{name:"supplierpart",title:n._({id:"FcNRrt"}),parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},render:p,enabled:m()},{name:"manufacturerpart",title:n._({id:"d0fBfb"}),parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},render:p,enabled:m()},{name:"partcategory",title:n._({id:"2GkbLI"}),parameters:{},render:p,enabled:m()},{name:"stockitem",title:n._({id:"Jbck4N"}),parameters:{part_detail:!0,location_detail:!0},render:p,enabled:m()},{name:"stocklocation",title:n._({id:"1eBWAw"}),parameters:{},render:p,enabled:m()},{name:"build",title:n._({id:"RCVhIP"}),parameters:{part_detail:!0},render:p,enabled:m()},{name:"company",title:n._({id:"s2QZS6"}),parameters:{},render:p,enabled:m()},{name:"purchaseorder",title:n._({id:"85Yvr2"}),parameters:{supplier_detail:!0},render:p,enabled:m()},{name:"salesorder",title:n._({id:"B1TL+X"}),parameters:{customer_detail:!0},render:p,enabled:m()},{name:"returnorder",title:n._({id:"LlTg8M"}),parameters:{customer_detail:!0},render:p,enabled:m()}]}function Qe({query:s,onRemove:r}){return s.results.count==0?null:e.jsx(ge,{shadow:"sm",radius:"xs",p:"md",children:e.jsxs(S,{children:[e.jsxs(j,{position:"apart",noWrap:!0,children:[e.jsxs(j,{position:"left",spacing:5,noWrap:!0,children:[e.jsx(u,{size:"lg",children:s.title}),e.jsxs(u,{size:"sm",italic:!0,children:[" ","- ",s.results.count," ",e.jsx(c,{id:"mO8KLE"})]})]}),e.jsx(w,{}),e.jsx(y,{size:"sm",color:"red",variant:"transparent",radius:"xs",onClick:()=>r(s.name),children:e.jsx(_e,{})})]}),e.jsx(q,{}),e.jsx(S,{children:s.results.results.map(i=>s.render(i))}),e.jsx(w,{})]},s.name)})}function Xe({opened:s,onClose:r}){const[i,t]=o.useState(""),[a]=xe(i,500),[x,f]=o.useState(!1),[k,b]=o.useState(!1),P=Ge().filter(l=>l.enabled);o.useEffect(()=>{J()},[a]);const te=async()=>{if(!a)return[];let l={offset:0,limit:10,search:a,search_regex:x,search_whole:k};return P.forEach(d=>{l[d.name]=d.parameters}),fe.post("/search/",l).then(function(d){return d.data}).catch(function(d){return console.error(d),[]})},{data:M,isError:D,isFetching:L,isLoading:is,refetch:J}=je(["search",a,x,k],te,{refetchOnWindowFocus:!1}),[T,N]=o.useState([]);o.useEffect(()=>{if(M){let l=P.filter(d=>d.name in M);for(let d in M){let Y=l.find(le=>le.name==d);Y&&(Y.results=M[d])}l=l.filter(d=>d.results.count>0),N(l)}else N([])},[M]);function ae(l){N(T.filter(d=>d.name!=l))}function ne(){t(""),r()}return e.jsxs(W,{opened:s,size:"lg",onClose:ne,position:"right",withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(j,{position:"apart",spacing:1,noWrap:!0,children:[e.jsx(ue,{placeholder:n._({id:"Dwt0g3"}),radius:"xs",value:i,onChange:l=>t(l.currentTarget.value),icon:e.jsx(B,{size:"0.8rem"}),rightSection:i&&e.jsx(Se,{color:"red",onClick:()=>t("")}),styles:{root:{width:"100%"}}}),e.jsx(y,{size:"lg",variant:"outline",radius:"xs",onClick:()=>J(),children:e.jsx(Re,{})}),e.jsxs(h,{children:[e.jsx(h.Target,{children:e.jsx(y,{size:"lg",variant:"outline",radius:"xs",children:e.jsx(ee,{})})}),e.jsxs(h.Dropdown,{children:[e.jsx(h.Label,{children:n._({id:"9UYKcs"})}),e.jsx(h.Item,{children:e.jsx(K,{label:n._({id:"qkCZlJ"}),checked:x,onChange:l=>f(l.currentTarget.checked),radius:"sm"})}),e.jsx(h.Item,{children:e.jsx(K,{label:n._({id:"roauu/"}),checked:k,onChange:l=>b(l.currentTarget.checked),radius:"sm"})})]})]})]}),children:[L&&e.jsx(me,{children:e.jsx(pe,{})}),!L&&!D&&e.jsx(S,{spacing:"md",children:T.map(l=>e.jsx(Qe,{query:l,onRemove:d=>ae(d)}))}),D&&e.jsx(A,{color:"red",radius:"sm",variant:"light",title:n._({id:"SlfejT"}),icon:e.jsx(Fe,{size:"1rem"}),children:e.jsx(c,{id:"hJCuaV"})}),a&&!L&&!D&&T.length==0&&e.jsx(A,{color:"blue",radius:"sm",variant:"light",title:n._({id:"Ev2r9A"}),icon:e.jsx(B,{size:"1rem"}),children:e.jsx(c,{id:"dTtbrX"})})]})}function es(){const{classes:s}=g(),[r,{open:i,close:t}]=Z(!1),[a,{open:x,close:f}]=Z(!1);return e.jsxs("div",{className:s.layoutHeader,children:[e.jsx(Xe,{opened:a,onClose:f}),e.jsx(qe,{opened:r,close:t}),e.jsx(C,{className:s.layoutHeaderSection,size:"xl",children:e.jsxs(j,{position:"apart",children:[e.jsxs(j,{children:[e.jsx($e,{openDrawer:i}),e.jsx(ss,{})]}),e.jsxs(j,{children:[e.jsx(Ae,{}),e.jsx(y,{onClick:x,children:e.jsx(B,{})}),e.jsx(Oe,{})]})]})})]})}function ss(){const{classes:s}=g(),{tabValue:r}=Ie(),i=De();return e.jsx(R,{defaultValue:"home",classNames:{root:s.tabs,tabsList:s.tabsList,tab:s.tab},value:r,onTabChange:t=>t=="/"?i("/"):i(`/${t}`),children:e.jsx(R.List,{children:ke.map(t=>e.jsx(R.Tab,{value:t.name,children:t.text},t.name))})})}const rs=({children:s})=>{const[r]=de(i=>[i.token]);return r?s:e.jsx(ze,{to:"/logged-in",replace:!0})};function xs(){const{classes:s}=g();return e.jsx(rs,{children:e.jsxs(U,{direction:"column",mih:"100vh",children:[e.jsx(es,{}),e.jsx(C,{className:s.layoutContent,size:"xl",children:e.jsx(Ce,{})}),e.jsx(w,{h:"xl"}),e.jsx(Ke,{})]})})}export{rs as ProtectedRoute,xs as default};
