import{b as h,L as g,A as m,P as d,aI as l}from"./index-0d19177e.js";import{i as _,F as n,p as s}from"./BaseContext-b2603304-d1129fb6.js";import{g as i,A as r,u as k,a as S}from"./DesktopAppView-6f26ab52-fe364a3c.js";var u=_("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);const A=async(t,e)=>{const{host:a}=d.getState(),o=await l.get(`${a}${i(r.user_token)}`,{auth:{username:t,password:e}}).then(c=>c.data.token).catch(c=>!1);return o===!1?o:(p(o),!0)},v=async()=>{const{setToken:t}=m.getState();return t(void 0),n.show({title:s._({id:"Py+E6e"}),message:s._({id:"aJhI/3"}),color:"green",icon:g.jsx(u,{size:"1rem"})}),!0},I=async t=>{const{host:e}=d.getState();return await l.post(`${e}${i(r.user_simple_login)}`,{email:t}).then(a=>a.data).catch(a=>!1)},p=t=>{const{setToken:e}=m.getState(),{fetchApiState:a}=k.getState(),{fetchServerApiState:o}=S.getState();e(t),a(),o()};function $(t,e){h.post(i(r.user_reset),e,{headers:{Authorization:""}}).then(a=>{a.status===200?(n.show({title:s._({id:"XAIcYu"}),message:s._({id:"eX0txO"}),color:"green",autoClose:!1}),t("/login")):n.show({title:s._({id:"WhimMi"}),message:s._({id:"tnaYa/"}),color:"red"})})}function j(t){h.get(i(r.user_token)).then(e=>{e.status===200&&e.data.token?(p(e.data.token),n.show({title:s._({id:"iVj6ge"}),message:s._({id:"FR/+0K"}),color:"green",icon:g.jsx(u,{size:"1rem"})}),t("/home")):t("/login")}).catch(()=>{t("/login")})}export{A as C,j as I,v as L,I as j,u as m,$ as y};
